{"version":3,"file":"ng2-carouselamos.component.js","sources":["ng2-carouselamos.component.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAM;AACN;AACA;AACA,2BAOE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nvar isEqual = require('lodash.isequal');\n/*\n  *\n  * @param() items - List of items to belong in carousel\n  * @param() width - Size of window(view) to show\n  * @param() $prev - Template for previous button\n  * @param() $next - Template for next button\n  * @param() $item - Template for the item\n*/\nvar Ng2Carouselamos = (function () {\n    function Ng2Carouselamos() {\n        this.items = [];\n        this.width = 500;\n        this.onSelectedItem = new EventEmitter();\n        this.childIndex = 0;\n        this.amount = 0;\n        this.startPress = 0;\n        this.lastX = 0;\n    }\n    Ng2Carouselamos.prototype.onMousedown = function (e) {\n        if (e.which === 1) {\n            this.startPress = e.clientX;\n            this.lastX = this.amount;\n        }\n    };\n    Ng2Carouselamos.prototype.onTouchdown = function (e) {\n        if (navigator.userAgent.indexOf('Android') >= 0)\n            e.preventDefault();\n        this.startPress = e.targetTouches[0].clientX;\n        this.lastX = this.amount;\n    };\n    Ng2Carouselamos.prototype.onMousemove = function (e, maxWidth) {\n        if (e.which === 1) {\n            var amount = this.lastX - (this.startPress - e.clientX);\n            if (amount > 0 || amount < -(maxWidth - this.width))\n                return;\n            this.amount = amount;\n        }\n    };\n    Ng2Carouselamos.prototype.onTouchmove = function (e, maxWidth) {\n        if (navigator.userAgent.indexOf('Android') >= 0)\n            e.preventDefault();\n        var amount = this.lastX - (this.startPress - e.targetTouches[0].clientX);\n        if (amount > 0 || amount < -(maxWidth - this.width))\n            return;\n        this.amount = amount;\n    };\n    Ng2Carouselamos.prototype.onMouseup = function (e, elem) {\n        if (e.which === 1) {\n            this.startPress = 0;\n            this.snap(elem);\n        }\n    };\n    Ng2Carouselamos.prototype.onTouchup = function (e, elem) {\n        if (navigator.userAgent.indexOf('Android') >= 0)\n            e.preventDefault();\n        this.startPress = 0;\n        this.snap(elem);\n    };\n    Ng2Carouselamos.prototype.snap = function (elem) {\n        var counter = 0;\n        var lastVal = 0;\n        for (var i = 0; i < this.items.length; i++) {\n            var el = elem.children[i];\n            var style = el.currentStyle || window.getComputedStyle(el);\n            counter += el.offsetWidth + (parseFloat(style.marginLeft) + parseFloat(style.marginRight));\n            if (this.amount <= lastVal && this.amount >= -counter) {\n                this.amount = -lastVal;\n                this.childIndex = i;\n                this.onSelectedItem.emit({ item: this.items[this.childIndex], index: this.childIndex, first: false });\n                return;\n            }\n            lastVal = counter;\n        }\n        return counter;\n    };\n    Ng2Carouselamos.prototype.scroll = function (forward, elem) {\n        this.childIndex += forward ? 1 : -1;\n        this.onSelectedItem.emit({ item: this.items[this.childIndex], index: this.childIndex, first: false });\n        this.amount = -(this.calcScroll(elem));\n    };\n    Ng2Carouselamos.prototype.calcScroll = function (elem) {\n        var counter = 0;\n        for (var i = this.childIndex - 1; i >= 0; i--) {\n            var el = elem.children[i];\n            var style = el.currentStyle || window.getComputedStyle(el);\n            counter += el.offsetWidth + (parseFloat(style.marginLeft) + parseFloat(style.marginRight));\n        }\n        return counter;\n    };\n    Ng2Carouselamos.prototype.ngOnChanges = function (changes) {\n        if (changes.items && !isEqual(changes.items.previousValue, changes.items.currentValue)) {\n            if (changes.items.firstChange) {\n                this.onSelectedItem.emit({ item: this.items[this.childIndex], index: this.childIndex, first: true });\n            }\n            this.amount = 0;\n        }\n    };\n    return Ng2Carouselamos;\n}());\nexport { Ng2Carouselamos };\nNg2Carouselamos.decorators = [\n    { type: Component, args: [{\n                selector: '[ng2-carouselamos]',\n                styles: [\"\\n    .ng2-carouselamos-container{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ng2-carouselamos-wrapper{overflow:hidden}.ng2-carouselamos{display:-webkit-box;display:-ms-flexbox;display:flex;transition:transform 1s, -webkit-transform 1s}.controls{pointer-events:none;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.controls button{pointer-events:all;background:transparent;border:0}\\n  \"],\n                template: \"\\n    <div class=\\\"ng2-carouselamos-container\\\">\\n      <div\\n        class=\\\"ng2-carouselamos-wrapper\\\"\\n        [style.width]=\\\"width + 'px'\\\"\\n        (mousedown)=\\\"onMousedown($event)\\\"\\n        (touchstart)=\\\"onTouchdown($event)\\\"\\n        (mousemove)=\\\"onMousemove($event, list.scrollWidth)\\\"\\n        (touchmove)=\\\"onTouchmove($event, list.scrollWidth)\\\"\\n        (mouseup)=\\\"onMouseup($event, list)\\\"\\n        (mouseleave)=\\\"onMouseup($event, list)\\\"\\n        (touchend)=\\\"onTouchup($event, list)\\\"\\n      >\\n        <div\\n          class=\\\"ng2-carouselamos\\\"\\n          [attr.startPress]=\\\"startPress\\\"\\n          [style.transition]=\\\"startPress > 0 ? 'none' : '-webkit-transform 1s'\\\"\\n          [style.webkitTransition]=\\\"startPress > 0 ? 'none' : '-webkit-transform 1s'\\\"\\n          [style.transform]=\\\"'translateX('+amount+'px)'\\\"\\n          [style.webkitTransform]=\\\"'translateX('+amount+'px)'\\\"\\n          #list\\n        >\\n          <ng-template\\n            *ngFor=\\\"let item of items; let i = index\\\"\\n            [ngTemplateOutlet]=\\\"$item\\\"\\n            [ngTemplateOutletContext]=\\\"{$implicit: item, index: i, selectedIndex: childIndex}\\\"\\n          ></ng-template>\\n        </div>\\n      </div>\\n      <div\\n        class=\\\"controls\\\"\\n        *ngIf=\\\"$prev || $next\\\"\\n      >\\n        <button\\n          type=\\\"button\\\"\\n          *ngIf=\\\"$prev\\\"\\n          (click)=\\\"scroll(false, list)\\\"\\n          [disabled]=\\\"amount >= 0\\\"\\n        >\\n          <ng-template\\n            [ngTemplateOutlet]=\\\"$prev\\\"\\n          ></ng-template>\\n        </button>\\n        <button\\n          type=\\\"button\\\"\\n          *ngIf=\\\"$next\\\"\\n          (click)=\\\"scroll(true, list)\\\"\\n          [disabled]=\\\"amount <= -(list.scrollWidth-width)\\\"\\n        >\\n            <ng-template\\n              [ngTemplateOutlet]=\\\"$next\\\"\\n            ></ng-template>\\n        </button>\\n      </div>\\n    </div>\\n  \"\n            },] },\n];\n/** @nocollapse */\nNg2Carouselamos.ctorParameters = function () { return []; };\nNg2Carouselamos.propDecorators = {\n    'items': [{ type: Input },],\n    'width': [{ type: Input },],\n    '$prev': [{ type: Input },],\n    '$next': [{ type: Input },],\n    '$item': [{ type: Input },],\n    'onSelectedItem': [{ type: Output },],\n};\n"]}